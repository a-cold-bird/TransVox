---
title: "安装指南"
description: "完整的 TransVox 安装和配置步骤"
order: 2
category: "getting-started"
---

# 安装指南

本指南将帮助你完成 TransVox 的完整安装和配置。

## 环境要求

在开始之前，请确保你的系统满足以下要求：

### 硬件要求
- **GPU**：NVIDIA GPU（推荐 2080Ti 及以上，显存 11GB+）
- **内存**：16GB RAM 或更多
- **硬盘**：至少 50GB 可用空间（用于模型和输出文件）

### 软件要求
- **操作系统**：Windows 10/11 或 Linux
- **Python**：3.10（推荐）
- **CUDA**：12.8（与 PyTorch 版本匹配）
- **FFmpeg**：最新版本
- **Node.js**：18.0 或更高（用于 Web 界面）

## 安装步骤

### 1. 克隆项目

```bash
git clone https://github.com/a-cold-bird/TransVox.git
cd TransVox
```

### 2. 创建 Python 虚拟环境

**Windows：**

```powershell
python -m venv venv
venv\Scripts\activate
```

**Linux：**

```bash
python3 -m venv venv
source venv/bin/activate
```

### 3. 安装 Python 依赖

```bash
# 升级 pip
python -m pip install --upgrade pip

# 安装 PyTorch（CUDA 12.8）
pip3 install torch torchvision --index-url https://download.pytorch.org/whl/cu128

# 安装项目依赖
pip install -r requirements.txt

# 安装 IndexTTS
pip install -e tools/index-tts

# 下载 NLTK 数据
python download_nltk_data.py
```

> **国内用户提示**：如果下载速度慢，可以使用清华镜像源：
> ```bash
> pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
> ```

### 4. 安装 FFmpeg

**Windows（使用 Scoop）：**

```powershell
scoop install ffmpeg
```

**Windows（使用 Chocolatey）：**

```powershell
choco install ffmpeg
```

**Linux（Ubuntu/Debian）：**

```bash
sudo apt-get update
sudo apt-get install -y ffmpeg
```

### 5. 下载 AI 模型

运行自动下载脚本：

```bash
python download_models.py
```

脚本会自动下载以下模型到 `tools/` 目录：

- **MSST-WebUI** 人声分离模型（~500MB）
- **GPT-SoVITS** 预训练模型（~2GB）
- **IndexTTS-2** 预训练模型（~1.5GB）

> **国内用户加速**：在 `.env` 文件中添加：
> ```
> HF_ENDPOINT=https://hf-mirror.com
> ```

<details>
<summary>手动下载模型（点击展开）</summary>

如果自动下载失败，可以手动下载：

**MSST-WebUI 模型：**
```bash
# 下载到 tools/MSST-WebUI/pretrain/vocal_models/
# 模型文件列表：
# - model_mel_band_roformer_karaoke_aufr33_viperx_sdr_10.1956.ckpt
# - big_beta5e.ckpt
```

**GPT-SoVITS 模型：**
```bash
huggingface-cli download lj1995/GPT-SoVITS --local-dir tools/GPT-SoVITS/GPT_SoVITS
```

**IndexTTS 模型：**
```bash
huggingface-cli download IndexTeam/IndexTTS-2 --local-dir tools/index-tts/checkpoints
```

</details>

### 6. 配置 API 密钥

复制环境变量模板：

```bash
cp .env_template .env
```

编辑 `.env` 文件，添加必需的 API 密钥：

```bash
# Gemini API Key（用于字幕翻译）
GEMINI_API_KEY=your_gemini_api_key

# Hugging Face Token（用于说话人识别）
HUGGINGFACE_TOKEN=your_huggingface_token

# 可选：国内用户加速
HF_ENDPOINT=https://hf-mirror.com
```

**获取 API 密钥：**

1. **Gemini API Key**：
   - 访问 [Google AI Studio](https://aistudio.google.com/)
   - 登录 Google 账号
   - 点击「Get API Key」创建密钥

2. **Hugging Face Token**：
   - 访问 [Hugging Face](https://huggingface.co/)
   - 登录后进入 Settings → Access Tokens
   - 创建新的 Read 权限 Token

### 7. 安装 Web 前端（可选）

如果你想使用 Web 界面：

```bash
cd web
npm install
cd ..
```

### 8. 验证安装

运行环境检测脚本：

```bash
python check_environment.py
```

如果看到所有检查项都显示 ✓，说明安装成功！

## 配置用户偏好（可选）

TransVox 支持保存用户偏好设置。使用配置工具：

```bash
# 查看当前配置
python config_tool.py show

# 使用快速预设（推荐新手）
python config_tool.py preset fast

# 使用高质量预设
python config_tool.py preset quality

# 手动设置配置项
python config_tool.py set translation.api_type gemini
python config_tool.py set tts.engine indextts
```

详细配置说明请参考 [配置管理指南](/docs/configuration/config-file)。

## 常见问题

### Q1: CUDA 不可用怎么办？

**A:** 确保：
1. 已安装 NVIDIA 驱动
2. CUDA 版本与 PyTorch 版本匹配
3. 运行 `nvidia-smi` 检查 GPU 状态

### Q2: 模型下载失败

**A:** 尝试：
1. 使用 HuggingFace 镜像站（见上方配置）
2. 手动下载模型文件
3. 检查网络连接

### Q3: FFmpeg 未找到

**A:** 确保 FFmpeg 已安装并在 PATH 中：
```bash
ffmpeg -version
```

## 下一步

安装完成后，你可以：

- [快速开始](/docs/getting-started/quick-start) - 处理第一个视频
- [CLI 使用指南](/docs/guide/cli-usage) - 学习命令行工具
- [Web 界面指南](/docs/guide/web-interface) - 使用图形界面
