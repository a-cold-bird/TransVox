# éªŒè¯å®‰è£…

åœ¨å¼€å§‹ä½¿ç”¨ TransVox ä¹‹å‰ï¼Œè®©æˆ‘ä»¬éªŒè¯å®‰è£…æ˜¯å¦æ­£ç¡®ã€‚

## è‡ªåŠ¨éªŒè¯

è¿è¡Œç¯å¢ƒæ£€æµ‹è„šæœ¬ï¼š

```bash
python check_environment.py
```

è¯¥è„šæœ¬ä¼šæ‰§è¡Œä»¥ä¸‹æ£€æŸ¥ï¼š

### 1. Python ç¯å¢ƒ

```
âœ… Python ç‰ˆæœ¬: 3.10.12
âœ… è™šæ‹Ÿç¯å¢ƒ: å·²æ¿€æ´»
```

**å¯èƒ½çš„é—®é¢˜ï¼š**
- âŒ Python ç‰ˆæœ¬ä¸åŒ¹é…ï¼šå®‰è£… Python 3.10
- âŒ è™šæ‹Ÿç¯å¢ƒæœªæ¿€æ´»ï¼šè¿è¡Œ `venv\Scripts\activate` (Windows) æˆ– `source venv/bin/activate` (Linux)

### 2. PyTorch å’Œ CUDA

```
âœ… PyTorch: 2.4.0+cu128
âœ… CUDA å¯ç”¨: True
âœ… CUDA ç‰ˆæœ¬: 12.8
âœ… GPU: NVIDIA GeForce RTX 2080 Ti (11GB)
```

**å¯èƒ½çš„é—®é¢˜ï¼š**
- âŒ CUDA ä¸å¯ç”¨ï¼šæ£€æŸ¥ NVIDIA é©±åŠ¨å’Œ CUDA å®‰è£…
- âŒ GPU æ˜¾å­˜ä¸è¶³ï¼šè‡³å°‘éœ€è¦ 6GBï¼Œæ¨è 11GB+

### 3. FFmpeg

```
âœ… FFmpeg: å·²å®‰è£…
âœ… ç‰ˆæœ¬: 6.0
```

**å¯èƒ½çš„é—®é¢˜ï¼š**
- âŒ FFmpeg æœªæ‰¾åˆ°ï¼šå®‰è£… FFmpeg å¹¶æ·»åŠ åˆ° PATH

### 4. API Keys

```
âœ… Gemini API Key: å·²é…ç½®
âœ… Hugging Face Token: å·²é…ç½®
```

**å¯èƒ½çš„é—®é¢˜ï¼š**
- âŒ API Key æœªé…ç½®ï¼šç¼–è¾‘ `.env` æ–‡ä»¶
- âŒ API Key æ— æ•ˆï¼šæ£€æŸ¥ Key æ˜¯å¦æ­£ç¡®

### 5. æ¨¡å‹æ–‡ä»¶

```
âœ… MSST-WebUI æ¨¡å‹: å·²ä¸‹è½½
âœ… GPT-SoVITS æ¨¡å‹: å·²ä¸‹è½½
âœ… IndexTTS æ¨¡å‹: å·²ä¸‹è½½
âœ… WhisperX æ¨¡å‹: å·²ä¸‹è½½
```

**å¯èƒ½çš„é—®é¢˜ï¼š**
- âŒ æ¨¡å‹æœªä¸‹è½½ï¼šè¿è¡Œ `python download_models.py`
- âŒ æ¨¡å‹è·¯å¾„é”™è¯¯ï¼šæ£€æŸ¥ `tools/` ç›®å½•ç»“æ„

### 6. Python ä¾èµ–

```
âœ… æ‰€æœ‰ä¾èµ–åŒ…å·²å®‰è£…
âœ… ç‰ˆæœ¬å…¼å®¹æ€§æ£€æŸ¥é€šè¿‡
```

**å¯èƒ½çš„é—®é¢˜ï¼š**
- âŒ ä¾èµ–ç¼ºå¤±ï¼šè¿è¡Œ `pip install -r requirements.txt`
- âŒ ç‰ˆæœ¬å†²çªï¼šåˆ é™¤è™šæ‹Ÿç¯å¢ƒé‡æ–°å®‰è£…

## æ‰‹åŠ¨æµ‹è¯•

### æµ‹è¯• API è¿æ¥

#### æµ‹è¯• Gemini API

```bash
python -c "
import os
from dotenv import load_dotenv
load_dotenv()
api_key = os.getenv('GEMINI_API_KEY')
print(f'API Key: {api_key[:10]}...')
print('Testing Gemini API...')
# è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„ API æµ‹è¯•ä»£ç 
"
```

#### æµ‹è¯• Hugging Face

```bash
python -c "
from huggingface_hub import HfApi
api = HfApi()
user = api.whoami()
print(f'Logged in as: {user[\"name\"]}')
"
```

### æµ‹è¯• GPU

```bash
python -c "
import torch
print(f'PyTorch Version: {torch.__version__}')
print(f'CUDA Available: {torch.cuda.is_available()}')
if torch.cuda.is_available():
    print(f'CUDA Version: {torch.version.cuda}')
    print(f'GPU Count: {torch.cuda.device_count()}')
    print(f'GPU Name: {torch.cuda.get_device_name(0)}')
    print(f'GPU Memory: {torch.cuda.get_device_properties(0).total_memory / 1024**3:.1f} GB')
"
```

### æµ‹è¯•æ¨¡å‹åŠ è½½

#### æµ‹è¯• IndexTTS

```bash
python -c "
import sys
sys.path.insert(0, 'tools/index-tts')
from indextts.infer_v2 import IndexTTS2
print('Loading IndexTTS...')
tts = IndexTTS2()
print('âœ… IndexTTS loaded successfully')
"
```

#### æµ‹è¯• WhisperX

```bash
python -c "
import whisperx
print('Loading WhisperX...')
model = whisperx.load_model('large-v3', device='cuda', compute_type='float16')
print('âœ… WhisperX loaded successfully')
"
```

## å¿«é€Ÿæµ‹è¯•

### æµ‹è¯•å®Œæ•´æµç¨‹

å‡†å¤‡ä¸€ä¸ªçŸ­è§†é¢‘ï¼ˆ10-30ç§’ï¼‰æµ‹è¯•å®Œæ•´æµç¨‹ï¼š

```bash
# å‡†å¤‡æµ‹è¯•è§†é¢‘
mkdir -p input
# å°†æµ‹è¯•è§†é¢‘æ”¾åˆ° input/ ç›®å½•

# è¿è¡Œå¿«é€Ÿæµ‹è¯•
python full_auto_pipeline.py input/test.mp4 --target_lang zh --test-mode
```

**é¢„æœŸç»“æœï¼š**
- è§†é¢‘è¢«æˆåŠŸå¤„ç†
- ç”Ÿæˆç¿»è¯‘å­—å¹•
- ç”Ÿæˆé…éŸ³
- è¾“å‡ºæœ€ç»ˆè§†é¢‘

**å¤„ç†æ—¶é—´ï¼š** çº¦ 2-5 åˆ†é’Ÿï¼ˆå–å†³äºè§†é¢‘é•¿åº¦å’Œ GPU æ€§èƒ½ï¼‰

## Web ç•Œé¢æµ‹è¯•

### å¯åŠ¨æœåŠ¡

**ç»ˆç«¯ 1ï¼šå¯åŠ¨åç«¯**
```bash
uvicorn api_server:app --host 0.0.0.0 --port 8000
```

**ç»ˆç«¯ 2ï¼šå¯åŠ¨å‰ç«¯**
```bash
cd web
npm run dev
```

### è®¿é—®ç•Œé¢

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š
- å‰ç«¯ï¼šhttp://localhost:3000
- API æ–‡æ¡£ï¼šhttp://localhost:8000/docs

### æµ‹è¯•åŠŸèƒ½

1. ä¸Šä¼ è§†é¢‘
2. é…ç½®ç¿»è¯‘å‚æ•°
3. å¼€å§‹å¤„ç†
4. æŸ¥çœ‹å®æ—¶è¿›åº¦
5. ä¸‹è½½ç»“æœ

## å¸¸è§é—®é¢˜

### CUDA å†…å­˜ä¸è¶³

å¦‚æœé‡åˆ° CUDA OOM (Out of Memory) é”™è¯¯ï¼š

1. å‡å°‘æ‰¹å¤„ç†å¤§å°
2. ä½¿ç”¨æ›´å°çš„æ¨¡å‹
3. å…³é—­å…¶ä»–ä½¿ç”¨ GPU çš„ç¨‹åº

### æ¨¡å‹åŠ è½½æ…¢

é¦–æ¬¡åŠ è½½æ¨¡å‹ä¼šæ¯”è¾ƒæ…¢ï¼ˆ1-3åˆ†é’Ÿï¼‰ï¼Œè¿™æ˜¯æ­£å¸¸çš„ã€‚åç»­å¯åŠ¨ä¼šæ›´å¿«ã€‚

### API é…é¢é™åˆ¶

Gemini API æœ‰é€Ÿç‡é™åˆ¶ã€‚å¦‚æœé‡åˆ°é…é¢é”™è¯¯ï¼š
1. ç­‰å¾…ä¸€æ®µæ—¶é—´åé‡è¯•
2. ä½¿ç”¨æ›´é«˜çº§çš„ API å¥—é¤
3. åˆ‡æ¢åˆ° OpenAI API

## éªŒè¯æ¸…å•

å®‰è£…éªŒè¯å®Œæˆï¼Œè¯·ç¡®è®¤ï¼š

- [ ] `check_environment.py` æ‰€æœ‰æ£€æŸ¥é€šè¿‡
- [ ] GPU å’Œ CUDA æ­£å¸¸å·¥ä½œ
- [ ] API Keys é…ç½®æ­£ç¡®
- [ ] æ‰€æœ‰æ¨¡å‹å·²ä¸‹è½½
- [ ] èƒ½å¤ŸæˆåŠŸå¤„ç†æµ‹è¯•è§†é¢‘
- [ ] Web ç•Œé¢æ­£å¸¸è®¿é—®

## ä¸‹ä¸€æ­¥

å…¨éƒ¨éªŒè¯é€šè¿‡ï¼ğŸ‰ ç°åœ¨æ‚¨å¯ä»¥ï¼š

- æŸ¥çœ‹ [CLI ä½¿ç”¨æŒ‡å—](/docs/user-guide/cli-usage)
- æŸ¥çœ‹ [Web ç•Œé¢æŒ‡å—](/docs/user-guide/web-interface)
- å¼€å§‹æ‚¨çš„ç¬¬ä¸€ä¸ªç¿»è¯‘é¡¹ç›®ï¼
